var sortable=function(){"use strict";function e(e,t,n){if(void 0===n)return e&&e.h5s&&e.h5s.data&&e.h5s.data[t];e.h5s=e.h5s||{},e.h5s.data=e.h5s.data||{},e.h5s.data[t]=n}function t(e,t){if(!(e instanceof NodeList||e instanceof HTMLCollection))throw new Error("You must provide a nodeList/HTMLCollection of elements to be filtered.");return"string"!=typeof t?Array.from(e):Array.from(e).filter(function(e){return 1===e.nodeType&&e.matches(t)})}function n(e,t,r){if(e instanceof Array)for(var a=0;a<e.length;++a)n(e[a],t,r);else e.addEventListener(t,r),e.h5s=e.h5s||{},e.h5s.events=e.h5s.events||{},e.h5s.events[t]=r}function r(e,t){if(e instanceof Array)for(var n=0;n<e.length;++n)r(e[n],t);else e.h5s&&e.h5s.events&&e.h5s.events[t]&&(e.removeEventListener(t,e.h5s.events[t]),delete e.h5s.events[t])}function a(e,t,n){if(e instanceof Array)for(var r=0;r<e.length;++r)a(e[r],t,n);else e.setAttribute(t,n)}function o(e,t){if(e instanceof Array)for(var n=0;n<e.length;++n)o(e[n],t);else e.removeAttribute(t)}function i(e){if(!e.parentElement)throw new Error("target element must be part of the dom");var t=e.getClientRects()[0];return{left:t.left+window.scrollX,right:t.right+window.scrollX,top:t.top+window.scrollY,bottom:t.bottom+window.scrollY}}function l(e,t){if(!(e instanceof Element&&(t instanceof NodeList||t instanceof HTMLCollection||t instanceof Array)))throw new Error("You must provide an element and a list of elements.");return Array.from(t).indexOf(e)}function s(e){if(!(e instanceof Element))throw new Error("Element is not a node element.");return null!==e.parentNode}var d,c,f=function(e,t,n){if(!(e instanceof Element&&e.parentElement instanceof Element))throw new Error("target and element must be a node");e.parentElement.insertBefore(t,"before"===n?e:e.nextElementSibling)},u=function(e,t){return f(e,t,"before")},p=function(e,t){return f(e,t,"after")};function m(n,r,a){if(void 0===r&&(r=function(e,t){return e}),void 0===a&&(a=function(e){return e}),!(n instanceof Element)||!0==!n.isSortable)throw new Error("You need to provide a sortableContainer to be serialized.");if("function"!=typeof r||"function"!=typeof a)throw new Error("You need to provide a valid serializer for items and the container.");var o=e(n,"opts"),i=t(n.children,o.items);return i=i.map(function(e){return{parent:n,node:e,html:e.outerHTML,index:l(e,i)}}),{container:a({node:n,itemCount:i.length}),items:i.map(function(e){return r(e,n)})}}function h(e){if(!(e instanceof Element))throw new Error("You must provide a valid dom element");var t=window.getComputedStyle(e);return["height","padding-top","padding-bottom"].map(function(e){var n=parseInt(t.getPropertyValue(e),10);return isNaN(n)?0:n}).reduce(function(e,t){return e+t})}var v,g=new Map,E=function(e){r(e,"dragstart"),r(e,"dragend"),r(e,"selectstart"),r(e,"dragover"),r(e,"dragenter"),r(e,"drop"),r(e,"mouseenter"),r(e,"mouseleave")},y=function(e){r(e,"dragover"),r(e,"dragenter"),r(e,"drop")},b=function(e,t){var n=function(e){return{draggedItem:e}}(t);!function(e,t){e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setData("text","arbitrary-content"),e.dataTransfer.setDragImage&&e.dataTransfer.setDragImage(t.draggedItem,t.x,t.y)}(e,n=function(e,t){return t.x||(t.x=parseInt(e.pageX-i(t.draggedItem).left)),t.y||(t.y=parseInt(e.pageY-i(t.draggedItem).top)),t}(e,n))},w=function(e,t){var n=e;return L(t)&&(a(n=e.cloneNode(!0),"aria-copied","true"),e.parentElement.appendChild(n),n.style.display="none",n.oldDisplay=e.style.display),n},x=function(t,n){if(C(t)){var r=e(t,"opts").acceptFrom;if(null!==r)return!1!==r&&r.split(",").filter(function(e){return e.length>0&&n.matches(e)}).length>0;if(t===n)return!0;if(void 0!==e(t,"connectWith"))return e(t,"connectWith")===e(n,"connectWith")}return!1},L=function(t){return!0===e(t,"opts").copy},A=function(e,t){var n,r=[];if(!t)return e;for(var a=0;a<e.length;++a)n=e[a].querySelectorAll(t),r=r.concat(Array.prototype.slice.call(n));return r};function C(t){return void 0!==t&&null!=t&&void 0!==e(t,"opts")}function I(e){for(;(e=e.parentElement)&&!C(e););return e}function S(n,r){var a=e(n,"opts"),o=t(n.children,a.items).filter(function(e){return e.contains(r)});return o.length>0?o[0]:r}var T=function(n){var a,i,l=e(n,"opts")||{},s=t(n.children,l.items),d=A(s,l.handle);y(n),(i=a=n).h5s&&delete i.h5s.data,o(a,"aria-dropeffect"),r(d,"mousedown"),E(s),function(e){o(e,"aria-grabbed"),o(e,"aria-copied"),o(e,"draggable"),o(e,"role")}(s)},D=function(r){var o=e(r,"opts"),i=t(r.children,o.items),l=A(i,o.handle);a(r,"aria-dropeffect","move"),e(r,"_disabled","false"),a(l,"draggable","true"),"function"!=typeof(document||window.document).createElement("span").dragDrop||o.disableIEFix||n(l,"mousedown",function(){if(-1!==i.indexOf(this))this.dragDrop();else{for(var e=this.parentElement;-1===i.indexOf(e);)e=e.parentElement;e.dragDrop()}})},Y=function(n){var a=e(n,"opts"),o=t(n.children,a.items),i=A(o,a.handle);e(n,"_disabled","false"),E(o),r(i,"mousedown"),y(n)};function O(r,o){var f=String(o);return o=Object.assign({connectWith:!1,acceptFrom:null,copy:!1,placeholder:null,disableIEFix:!1,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:!1,debounce:0,maxItems:0,itemSerializer:void 0,containerSerializer:void 0},"object"==typeof o?o:{}),"string"==typeof r&&(r=document.querySelectorAll(r)),r instanceof Element&&(r=[r]),r=Array.prototype.slice.call(r),/serialize/.test(f)?r.map(function(t){var n=e(t,"opts");return m(t,n.itemSerializer,n.containerSerializer)}):(r.forEach(function(r){if(/enable|disable|destroy/.test(f))return O[f](r);o=e(r,"opts")||o,e(r,"opts",o),r.isSortable=!0,Y(r);var E,y,A,T=t(r.children,o.items);if(null!==o.placeholder&&void 0!==o.placeholder){var N=document.createElement(r.tagName);N.innerHTML=o.placeholder,A=N.children[0]}var z=function(e,t,n){if(void 0===n&&(n="sortable-placeholder"),!(e instanceof Element))throw new Error("You must provide a valid element as a sortable.");if(!(t instanceof Element)&&void 0!==t)throw new Error("You must provide a valid element as a placeholder or set ot to undefined.");return void 0===t&&(["UL","OL"].includes(e.tagName)?t=document.createElement("li"):["TABLE","TBODY"].includes(e.tagName)?(t=document.createElement("tr")).innerHTML='<td colspan="100"></td>':t=document.createElement("div")),"string"==typeof n&&(r=t.classList).add.apply(r,n.split(" ")),t;var r}(r,A,o.placeholderClass);if(e(r,"items",o.items),g.set(r,z),o.acceptFrom?e(r,"acceptFrom",o.acceptFrom):o.connectWith&&e(r,"connectWith",o.connectWith),D(r),a(T,"role","option"),a(T,"aria-grabbed","false"),"string"==typeof o.hoverClass){var M=o.hoverClass.split(" ");n(T,"mouseenter",function(e){var t;(t=e.target.classList).add.apply(t,M)}),n(T,"mouseleave",function(e){var t;(t=e.target.classList).remove.apply(t,M)})}n(r,"dragstart",function(e){if(!C(e.target)&&(e.stopImmediatePropagation(),(!o.handle||e.target.matches(o.handle))&&"false"!==e.target.getAttribute("draggable"))){var t=I(e.target),n=S(t,e.target);b(e,n),c=h(n),n.classList.add(o.draggingClass),a(d=w(n,t),"aria-grabbed","true"),E=l(d,d.parentElement.children),v=I(e.target),y=m(v),t.dispatchEvent(new CustomEvent("sortstart",{detail:{item:d,placeholder:g.get(t),startparent:v}}))}}),n(r,"dragend",function(n){var r;if(d){var i=I(n.target);d.classList.remove(o.draggingClass),a(d,"aria-grabbed","false"),"true"===d.getAttribute("aria-copied")&&"true"!==e(d,"dropped")&&d.remove(),d.style.display=d.oldDisplay,delete d.oldDisplay,g.forEach(function(e){return e.remove()}),r=this.parentElement,x(r,v)&&(i.dispatchEvent(new CustomEvent("sortstop",{detail:{item:d,startparent:v}})),E===l(d,d.parentElement.children)&&v===r||i.dispatchEvent(new CustomEvent("sortupdate",{detail:{item:d,index:t(r.children,e(r,"items")).indexOf(d),oldindex:T.indexOf(d),elementIndex:l(d,d.parentElement.children),oldElementIndex:E,startparent:v,endparent:r,newEndList:m(r),newStartList:m(v),oldStartList:y}}))),d=null,c=null}}),n(r,"drop",function(n){if(x(r,d.parentElement)){n.preventDefault(),n.stopPropagation(),e(d,"dropped","true");var a=Array.from(g.values()).filter(s)[0];p(a,d),r.dispatchEvent(new CustomEvent("sortstop",{detail:{item:d,startparent:v}}));var o=C(this)?this:this.parentElement;E===l(d,d.parentElement.children)&&v===o||r.dispatchEvent(new CustomEvent("sortupdate",{detail:{item:d,index:l(d,t(o.children,e(o,"items"))),oldindex:T.indexOf(d),elementIndex:l(d,d.parentElement.children),oldElementIndex:E,startparent:v,endparent:o,newEndList:m(o),newStartList:m(v),oldStartList:y}}))}});var F,W,H,P=(F=function(e,n,r){if(d){var a=g.get(e);if(o.forcePlaceholderSize&&(a.style.height=c+"px"),Array.from(e.children).indexOf(n)>-1){var s=h(n),f=l(a,n.parentElement.children),m=l(n,n.parentElement.children);if(s>c){var v=s-c,E=i(n).top;if(f<m&&r<E)return;if(f>m&&r>E+s-v)return}void 0===d.oldDisplay&&(d.oldDisplay=d.style.display),"none"!==d.style.display&&(d.style.display="none"),f<m?p(n,a):u(n,a),Array.from(g.values()).filter(function(e){return e!==a}).forEach(function(e){return e.remove()})}else-1!==Array.from(g.values()).indexOf(n)||e!==n||t(n.children,o.items).length||(g.forEach(function(e){return e.remove()}),n.appendChild(a))}},void 0===(W=o.debounce)&&(W=0),function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];clearTimeout(H),H=setTimeout(function(){F.apply(void 0,e)},W)}),_=function(n){var r=n.target,a=C(r)?r:I(r);if(r=S(a,r),d&&x(a,d.parentElement)&&"true"!==e(a,"_disabled")){var o=e(a,"opts");parseInt(o.maxItems)&&t(a.children,e(a,"items")).length>=parseInt(o.maxItems)||(n.preventDefault(),n.stopPropagation(),n.dataTransfer.dropEffect=L(a)?"copy":"move",P(a,r,n.pageY))}};n(T.concat(r),"dragover",_),n(T.concat(r),"dragenter",_)}),r)}return O.destroy=function(e){T(e)},O.enable=function(e){D(e)},O.disable=function(n){!function(n){var o=e(n,"opts"),i=t(n.children,o.items),l=A(i,o.handle);a(n,"aria-dropeffect","none"),e(n,"_disabled","true"),a(l,"draggable","false"),r(l,"mousedown")}(n)},O}();
//# sourceMappingURL=html5sortable.min.js.map
